var should = require('should');
var DataSource = require('loopback-datasource-juggler').DataSource;

var config = require('rc')('loopback', {test: {mongodb:{}}}).test.mongodb;

var ds = new DataSource(require('../'), config);

var Customer = ds.createModel('customer1', {id: {type: String, id: true}, name: String, emails: [String], age: Number});

Customer.create({
    name: 'John1',
    emails: ['john@x.com', 'john@y.com'],
    age: 30
}, function(err, customer) {
    console.log(customer.toObject());
    Customer.findOne(function(e, u) {
      Customer.find({where: {id: u.id}}, console.log);
      /*
      Customer.findOne({where: {id: u.id}}, function(err, user) {
        console.log(err);
        should.not.exist(err);
        should.exist(user);
      });
*/
    });
  });

